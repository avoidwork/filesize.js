{"version":3,"file":"filesize.umd.production.min.cjs","sources":["../src/constants.js","../src/filesize.js","../src/filesize.cts"],"sourcesContent":["export const ARRAY = \"array\";\nexport const BIT = \"bit\";\nexport const BITS = \"bits\";\nexport const BYTE = \"byte\";\nexport const BYTES = \"bytes\";\nexport const EMPTY = \"\";\nexport const EXPONENT = \"exponent\";\nexport const FUNCTION = \"function\";\nexport const IEC = \"iec\";\nexport const INVALID_NUMBER = \"Invalid number\";\nexport const INVALID_ROUND = \"Invalid rounding method\";\nexport const JEDEC = \"jedec\";\nexport const OBJECT = \"object\";\nexport const PERIOD = \".\";\nexport const ROUND = \"round\";\nexport const S = \"s\";\nexport const SI_KBIT = \"kbit\";\nexport const SI_KBYTE = \"kB\";\nexport const SPACE = \" \";\nexport const STRING = \"string\";\nexport const ZERO = \"0\";\nexport const STRINGS = {\n\tsymbol: {\n\t\tiec: {\n\t\t\tbits: [\"bit\", \"Kibit\", \"Mibit\", \"Gibit\", \"Tibit\", \"Pibit\", \"Eibit\", \"Zibit\", \"Yibit\"],\n\t\t\tbytes: [\"B\", \"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\", \"EiB\", \"ZiB\", \"YiB\"]\n\t\t},\n\t\tjedec: {\n\t\t\tbits: [\"bit\", \"Kbit\", \"Mbit\", \"Gbit\", \"Tbit\", \"Pbit\", \"Ebit\", \"Zbit\", \"Ybit\"],\n\t\t\tbytes: [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"]\n\t\t}\n\t},\n\tfullform: {\n\t\tiec: [\"\", \"kibi\", \"mebi\", \"gibi\", \"tebi\", \"pebi\", \"exbi\", \"zebi\", \"yobi\"],\n\t\tjedec: [\"\", \"kilo\", \"mega\", \"giga\", \"tera\", \"peta\", \"exa\", \"zetta\", \"yotta\"]\n\t}\n};\n","import {\n\tARRAY,\n\tBIT,\n\tBITS,\n\tBYTE,\n\tBYTES,\n\tEMPTY,\n\tEXPONENT,\n\tFUNCTION,\n\tIEC,\n\tINVALID_NUMBER,\n\tINVALID_ROUND,\n\tJEDEC,\n\tOBJECT,\n\tPERIOD,\n\tROUND,\n\tS,\n\tSI_KBIT,\n\tSI_KBYTE,\n\tSPACE,\n\tSTRING,\n\tSTRINGS,\n\tZERO\n} from \"./constants\";\n\nexport function filesize (arg, {\n\tbits = false,\n\tpad = false,\n\tbase = -1,\n\tround = 2,\n\tlocale = EMPTY,\n\tlocaleOptions = {},\n\tseparator = EMPTY,\n\tspacer = SPACE,\n\tsymbols = {},\n\tstandard = EMPTY,\n\toutput = STRING,\n\tfullform = false,\n\tfullforms = [],\n\texponent = -1,\n\troundingMethod = ROUND,\n\tprecision = 0\n} = {}) {\n\tlet e = exponent,\n\t\tnum = Number(arg),\n\t\tresult = [],\n\t\tval = 0,\n\t\tu = EMPTY;\n\n\t// Sync base & standard\n\tif (base === -1 && standard.length === 0) {\n\t\tbase = 10;\n\t\tstandard = JEDEC;\n\t} else if (base === -1 && standard.length > 0) {\n\t\tstandard = standard === IEC ? IEC : JEDEC;\n\t\tbase = standard === IEC ? 2 : 10;\n\t} else {\n\t\tbase = base === 2 ? 2 : 10;\n\t\tstandard = base === 10 ? JEDEC : standard === JEDEC ? JEDEC : IEC;\n\t}\n\n\tconst ceil = base === 10 ? 1000 : 1024,\n\t\tfull = fullform === true,\n\t\tneg = num < 0,\n\t\troundingFunc = Math[roundingMethod];\n\n\tif (typeof arg !== \"bigint\" && isNaN(arg)) {\n\t\tthrow new TypeError(INVALID_NUMBER);\n\t}\n\n\tif (typeof roundingFunc !== FUNCTION) {\n\t\tthrow new TypeError(INVALID_ROUND);\n\t}\n\n\t// Flipping a negative number to determine the size\n\tif (neg) {\n\t\tnum = -num;\n\t}\n\n\t// Determining the exponent\n\tif (e === -1 || isNaN(e)) {\n\t\te = Math.floor(Math.log(num) / Math.log(ceil));\n\n\t\tif (e < 0) {\n\t\t\te = 0;\n\t\t}\n\t}\n\n\t// Exceeding supported length, time to reduce & multiply\n\tif (e > 8) {\n\t\tif (precision > 0) {\n\t\t\tprecision += 8 - e;\n\t\t}\n\n\t\te = 8;\n\t}\n\n\tif (output === EXPONENT) {\n\t\treturn e;\n\t}\n\n\t// Zero is now a special case because bytes divide by 1\n\tif (num === 0) {\n\t\tresult[0] = 0;\n\t\tu = result[1] = STRINGS.symbol[standard][bits ? BITS : BYTES][e];\n\t} else {\n\t\tval = num / (base === 2 ? Math.pow(2, e * 10) : Math.pow(1000, e));\n\n\t\tif (bits) {\n\t\t\tval = val * 8;\n\n\t\t\tif (val >= ceil && e < 8) {\n\t\t\t\tval = val / ceil;\n\t\t\t\te++;\n\t\t\t}\n\t\t}\n\n\t\tconst p = Math.pow(10, e > 0 ? round : 0);\n\t\tresult[0] = roundingFunc(val * p) / p;\n\n\t\tif (result[0] === ceil && e < 8 && exponent === -1) {\n\t\t\tresult[0] = 1;\n\t\t\te++;\n\t\t}\n\n\t\tu = result[1] = base === 10 && e === 1 ? bits ? SI_KBIT : SI_KBYTE : STRINGS.symbol[standard][bits ? BITS : BYTES][e];\n\t}\n\n\t// Decorating a 'diff'\n\tif (neg) {\n\t\tresult[0] = -result[0];\n\t}\n\n\t// Setting optional precision\n\tif (precision > 0) {\n\t\tresult[0] = result[0].toPrecision(precision);\n\t}\n\n\t// Applying custom symbol\n\tresult[1] = symbols[result[1]] || result[1];\n\n\tif (locale === true) {\n\t\tresult[0] = result[0].toLocaleString();\n\t} else if (locale.length > 0) {\n\t\tresult[0] = result[0].toLocaleString(locale, localeOptions);\n\t} else if (separator.length > 0) {\n\t\tresult[0] = result[0].toString().replace(PERIOD, separator);\n\t}\n\n\tif (pad && Number.isInteger(result[0]) === false && round > 0) {\n\t\tconst x = separator || PERIOD,\n\t\t\ttmp = result[0].toString().split(x),\n\t\t\ts = tmp[1] || EMPTY,\n\t\t\tl = s.length,\n\t\t\tn = round - l;\n\n\t\tresult[0] = `${tmp[0]}${x}${s.padEnd(l + n, ZERO)}`;\n\t}\n\n\tif (full) {\n\t\tresult[1] = fullforms[e] ? fullforms[e] : STRINGS.fullform[standard][e] + (bits ? BIT : BYTE) + (result[0] === 1 ? EMPTY : S);\n\t}\n\n\t// Returning Array, Object, or String (default)\n\treturn output === ARRAY ? result : output === OBJECT ? {\n\t\tvalue: result[0],\n\t\tsymbol: result[1],\n\t\texponent: e,\n\t\tunit: u\n\t} : result.join(spacer);\n}\n\n// Partial application for functional programming\nexport function partial ({\n\tbits = false,\n\tpad = false,\n\tbase = -1,\n\tround = 2,\n\tlocale = EMPTY,\n\tlocaleOptions = {},\n\tseparator = EMPTY,\n\tspacer = SPACE,\n\tsymbols = {},\n\tstandard = EMPTY,\n\toutput = STRING,\n\tfullform = false,\n\tfullforms = [],\n\texponent = -1,\n\troundingMethod = ROUND,\n\tprecision = 0\n} = {}) {\n\treturn arg => filesize(arg, {\n\t\tbits,\n\t\tpad,\n\t\tbase,\n\t\tround,\n\t\tlocale,\n\t\tlocaleOptions,\n\t\tseparator,\n\t\tspacer,\n\t\tsymbols,\n\t\tstandard,\n\t\toutput,\n\t\tfullform,\n\t\tfullforms,\n\t\texponent,\n\t\troundingMethod,\n\t\tprecision\n\t});\n}\n\n// @ts-ignore\nif (process.env.TSDX_FORMAT !== 'esm')\n{\n\tObject.defineProperty(filesize, \"__esModule\", { value: true });\n\n\tObject.defineProperty(filesize, 'filesize', { value: filesize });\n\tObject.defineProperty(filesize, 'default', { value: filesize });\n\n\tObject.defineProperty(filesize, 'partial', { value: partial });\n}\n\nexport default filesize\n","import { filesize as _ } from './filesize.js';\n\n// @ts-ignore\nexports = _;\n"],"names":["BITS","BYTES","IEC","JEDEC","ROUND","STRING","STRINGS","symbol","iec","bits","bytes","jedec","fullform","filesize","arg","pad","base","round","locale","EMPTY","localeOptions","separator","spacer","symbols","standard","output","fullforms","exponent","roundingMethod","precision","e","num","Number","result","val","u","length","ceil","full","neg","roundingFunc","Math","isNaN","TypeError","floor","log","pow","p","toPrecision","toLocaleString","toString","replace","isInteger","x","tmp","split","s","l","padEnd","value","unit","join","Object","defineProperty","partial","exports","_"],"mappings":"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"}