{"version":3,"file":"filesize.min.js","sources":["../src/filesize.js"],"sourcesContent":["const b = /^(b|B)$/,\n\tsymbol = {\n\t\tiec: {\n\t\t\tbits: [\"b\", \"Kib\", \"Mib\", \"Gib\", \"Tib\", \"Pib\", \"Eib\", \"Zib\", \"Yib\"],\n\t\t\tbytes: [\"B\", \"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\", \"EiB\", \"ZiB\", \"YiB\"]\n\t\t},\n\t\tjedec: {\n\t\t\tbits: [\"b\", \"Kb\", \"Mb\", \"Gb\", \"Tb\", \"Pb\", \"Eb\", \"Zb\", \"Yb\"],\n\t\t\tbytes: [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"]\n\t\t}\n\t},\n\tfullform = {\n\t\tiec: [\"\", \"kibi\", \"mebi\", \"gibi\", \"tebi\", \"pebi\", \"exbi\", \"zebi\", \"yobi\"],\n\t\tjedec: [\"\", \"kilo\", \"mega\", \"giga\", \"tera\", \"peta\", \"exa\", \"zetta\", \"yotta\"]\n\t};\n\n/**\n * filesize\n *\n * @method filesize\n * @param  {Mixed}   arg        String, Int or Float to transform\n * @param  {Object}  descriptor [Optional] Flags\n * @return {String}             Readable file size String\n */\nfunction filesize (arg, descriptor = {}) {\n\tlet result = [],\n\t\tval = 0,\n\t\te, base, bits, ceil, full, fullforms, locale, localeOptions, neg, num, output, pad, round, unix, separator, spacer, standard, symbols;\n\n\tif (isNaN(arg)) {\n\t\tthrow new TypeError(\"Invalid number\");\n\t}\n\n\tbits = descriptor.bits === true;\n\tunix = descriptor.unix === true;\n\tpad = descriptor.pad === true;\n\tbase = descriptor.base || 2;\n\tround = descriptor.round !== void 0 ? descriptor.round : unix ? 1 : 2;\n\tlocale = descriptor.locale !== void 0 ? descriptor.locale : \"\";\n\tlocaleOptions = descriptor.localeOptions || {};\n\tseparator = descriptor.separator !== void 0 ? descriptor.separator : \"\";\n\tspacer = descriptor.spacer !== void 0 ? descriptor.spacer : unix ? \"\" : \" \";\n\tsymbols = descriptor.symbols || {};\n\tstandard = base === 2 ? descriptor.standard || \"jedec\" : \"jedec\";\n\toutput = descriptor.output || \"string\";\n\tfull = descriptor.fullform === true;\n\tfullforms = descriptor.fullforms instanceof Array ? descriptor.fullforms : [];\n\te = descriptor.exponent !== void 0 ? descriptor.exponent : -1;\n\tnum = Number(arg);\n\tneg = num < 0;\n\tceil = base > 2 ? 1000 : 1024;\n\n\t// Flipping a negative number to determine the size\n\tif (neg) {\n\t\tnum = -num;\n\t}\n\n\t// Determining the exponent\n\tif (e === -1 || isNaN(e)) {\n\t\te = Math.floor(Math.log(num) / Math.log(ceil));\n\n\t\tif (e < 0) {\n\t\t\te = 0;\n\t\t}\n\t}\n\n\t// Exceeding supported length, time to reduce & multiply\n\tif (e > 8) {\n\t\te = 8;\n\t}\n\n\tif (output === \"exponent\") {\n\t\treturn e;\n\t}\n\n\t// Zero is now a special case because bytes divide by 1\n\tif (num === 0) {\n\t\tresult[0] = 0;\n\t\tresult[1] = unix ? \"\" : symbol[standard][bits ? \"bits\" : \"bytes\"][e];\n\t} else {\n\t\tval = num / (base === 2 ? Math.pow(2, e * 10) : Math.pow(1000, e));\n\n\t\tif (bits) {\n\t\t\tval = val * 8;\n\n\t\t\tif (val >= ceil && e < 8) {\n\t\t\t\tval = val / ceil;\n\t\t\t\te++;\n\t\t\t}\n\t\t}\n\n\t\tresult[0] = Number(val.toFixed(e > 0 ? round : 0));\n\n\t\tif (result[0] === ceil && e < 8 && descriptor.exponent === void 0) {\n\t\t\tresult[0] = 1;\n\t\t\te++;\n\t\t}\n\n\t\tresult[1] = base === 10 && e === 1 ? bits ? \"kb\" : \"kB\" : symbol[standard][bits ? \"bits\" : \"bytes\"][e];\n\n\t\tif (unix) {\n\t\t\tresult[1] = standard === \"jedec\" ? result[1].charAt(0) : e > 0 ? result[1].replace(/B$/, \"\") : result[1];\n\n\t\t\tif (b.test(result[1])) {\n\t\t\t\tresult[0] = Math.floor(result[0]);\n\t\t\t\tresult[1] = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Decorating a 'diff'\n\tif (neg) {\n\t\tresult[0] = -result[0];\n\t}\n\n\t// Applying custom symbol\n\tresult[1] = symbols[result[1]] || result[1];\n\n\tif (locale === true) {\n\t\tresult[0] = result[0].toLocaleString();\n\t} else if (locale.length > 0) {\n\t\tresult[0] = result[0].toLocaleString(locale, localeOptions);\n\t} else if (separator.length > 0) {\n\t\tresult[0] = result[0].toString().replace(\".\", separator);\n\t}\n\n\tif (full) {\n\t\tresult[1] = fullforms[e] ? fullforms[e] : fullform[standard][e] + (bits ? \"bit\" : \"byte\") + (result[0] === 1 ? \"\" : \"s\");\n\t}\n\n\t// Returning Array, Object, or String (default)\n\tif (output === \"array\") {\n\t\treturn result;\n\t}\n\n\tif (output === \"object\") {\n\t\treturn {value: result[0], symbol: result[1], exponent: e};\n\t}\n\n\tif (pad && Number.isInteger(result[0]) === false && round > 0) {\n\t\tconst x = separator || \".\",\n\t\t\ttmp = result[0].toString().split(x),\n\t\t\ts = tmp[1] || \"\",\n\t\t\tl = s.length,\n\t\t\tn = round - l;\n\n\t\tresult[0] = `${tmp[0]}${x}${s.padEnd(l + n, \"0\")}`;\n\t}\n\n\treturn result.join(spacer);\n}\n\n// Partial application for functional programming\nfilesize.partial = opt => arg => filesize(arg, opt);\n\nexport default filesize;\n"],"names":["b","symbol","iec","bits","bytes","jedec","fullform","filesize","arg","e","base","ceil","full","fullforms","locale","localeOptions","neg","num","output","pad","round","unix","separator","spacer","standard","symbols","descriptor","result","val","isNaN","TypeError","Array","exponent","Number","Math","floor","log","pow","toFixed","charAt","replace","test","toLocaleString","length","toString","value","isInteger","x","tmp","split","s","l","n","padEnd","join","partial","opt"],"mappings":"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"}